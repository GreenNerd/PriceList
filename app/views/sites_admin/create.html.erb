<div class="page-header">
  <h3 style="font-weight:bold;">上传/管理商品</h3>
</div>

<%= form_for @product, html: { multipart: true } do |f| %>
<div class="container-fluid pro-create">
  <div class="sep">
    <span class="label label-default">选择分类:</span>
    <div clas="row" style="padding-left:70px;">
    <div class="form-group">
      <%= f.select(:category_id, Category.all.collect { |m| [ m.name, m.id ] }, {}, class: "form-control", id: "cgry-select", style: "width:20%", multiple: true) %>
    </div>
    <button type="button" class="btn btn-info btn-sm" id="with_cgry">管理分类</button>
    </div>
  </div>

  <div class="sep">
    <span class="label label-default">商品标题:</span>
    <div class="row" style="padding-left:70px;">
      <div class="col-lg-3">
        <%= f.text_field :name, type: "text", class: "form-control", placeholder: "请输入商品标题" %>
      </div>
    </div>
  </div>

  <div class="sep">
    <span class="label label-default">商品型号:</span>
    <button type="button" class="btn btn-info btn-sm" id="with_type">添加型号</button>
      <div class="row" style="padding-left:70px;">
        <div class="col-lg-4" id="dimension-sep">
          <div class="alert alert-success alert-dismissible" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            E5-1110000
          </div>
        </div>
      </div>
    </div>
    <div class="sep">
    <span class="label label-default">商品价格:</span>
    <div class="row" style="padding-left:70px;">
      <div class="col-lg-3">
        <div class="input-group">
          <%= f.text_field :price, type: "text", class: "form-control", placeholder: "请输入商品价格" %>
          <span class="input-group-addon">元</span>
        </div>
      </div>
    </div>
  </div>

  <div class="sep">
    <span class="label label-default">商品库存:</span>
    <div class="row"style="padding-left:70px;">
      <div class="col-lg-3">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="请输入商品库存">
          <span class="input-group-addon">件</span>
        </div>
      </div>
    </div>
  </div>

  <div class="sep">
    <span class="label label-default">商品图片:</span>
    <div style="padding-left:70px;">
    <div class="well">
      <%= f.file_field :thumb %>
      <button type="button" class="btn btn-info btn-sm">上传图片</button>
      <br />
      <img src="http://ogf4uc3pg.bkt.clouddn.com/X3750M4.jpg?imageMogr2/thumbnail/152x119!" alt="" class="img-rounded">
      <img src="http://ogf4uc3pg.bkt.clouddn.com/X3750M4.jpg?imageMogr2/thumbnail/152x119!" alt="" class="img-rounded">
      <img src="http://ogf4uc3pg.bkt.clouddn.com/X3750M4.jpg?imageMogr2/thumbnail/152x119!" alt="" class="img-rounded">
    </div>
    </div>
  </div>

  <div class="sep">
    <span class="label label-default">商品描述:</span>
    <div style="padding-left:70px;">
      <%= f.text_area :description, class: "form-control", id: "detail-editor", placeholder: "" %>
    </div>
  </div>

  <div class="sep">
    <span class="label label-default">商品规格:</span>
    <button type="button" class="btn btn-info btn-sm" id="with_disn" data-toggle="modal" data-target="#dialog_disn">添加规格</button>
    <div style="padding-left:70px;">
      <div class="alert alert-success alert-dismissible" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <span class="label label-primary">机箱形态</span>
        TinkServer TD350 8*2.5系列 4U塔式
      </div>
      <div class="alert alert-success alert-dismissible" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <span class="label label-primary">处理器</span>
        因特尔@至强@处理器E5-2609 v4 1.7GHz
      </div>
      <div class="alert alert-success alert-dismissible" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <span class="label label-primary">处理器</span>
        因特尔@至强@处理器E5-2609 v4 1.7GHz
      </div>
    </div>
  </div>

  <div class="sep">
    <span class="label label-default">商品图片:</span>
      <div class="row" style="padding-left:70px;">
        <label class="control-label">选择文件</label>
        <input id="input-44" name="input44[]" type="file" mutiple class="file-loading">
        <div id="errorBlock" class="help-block"></div>
      </div>
    </div>
  <div>

  <div style="padding-bottom:80px; padding-top:80px;">
    <%= f.submit "保存", type: "button", class:"btn btn-info btn-sm", style: "float:right;" %>
  </div>

</div>
<% end %>

<script>
$("#cgry-tree-add").on('click', function(){
  nodes = $('#cgry-tree').treeview('getSelected');
  parents = $('#cgry-tree').treeview('getParents', nodes);
  alert(nodes[0]);
  $('#cgry-tree').treeview('addNodeAfter', [ parents, nodes, { silent: true } ]);
});
$("#cgry-tree-rmv").on('click', function(){
  nodes = $('#cgry-tree').treeview('getSelected');
  alert(nodes[0]);
  $('#cgry-tree').treeview('removeNode', [ nodes, { silent: true } ]);
});
</script>

<script>
$(document).on('ready', function(){
  $("#input-44").fileinput({
    uploadUrl: "/file-upload-batch/2",
    maxFilePreviewSize: 10240
  });
});

editor = new Simditor({
  textarea: $('#detail-editor'),
  toolbar: [
      'title','bold','italic','underline','strikethrough','color','|',
      'ol','ul','blockquote','code','table','link','image','hr','|',
      'indent','outdent'
    ],
  pasteImage: true,
  defaultImage: '<%= image_path "upload-loading.png" %>'
});

function setDimensions() {
    $ngConfirm({
        title: 'Oh no',
        content: '<p>Something bad, bad happened.</p>' +
        'Select the alert type:' +
        ' <div class="form-group">' +
        '<select class="form-control" ng-model="ngc.type">' +
        '<option value="default">Default</option>' +
        '<option value="red">Red</option>' +
        '<option value="blue">Blue</option>' +
        '<option value="green">Green</option>' +
        '<option value="purple">Purple</option>' +
        '<option value="dark">Dark</option>' +
        '</select>' +
        '<div class="checkbox"><label><input type="checkbox" ng-model="ngc.typeAnimated"> Animated</label></div>' +
        '</div>',
        type: 'red',
        typeAnimated: true,
        buttons: {
            ok: function () {
            }
        },
        onContentReady: function ($scope) {

        }
    })
};

$(document).ready(function(){
  $('#cgry-select').select2({
    placeholder: "请选择商品分类",
    allowClear: true
  });
});
</script>
