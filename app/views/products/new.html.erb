<div class="col-md-1"></div>
<div class="col-md-10">
  <%= form_for @product, html: { class: "form-horizontal", multipart: true } do |f| %>
    <!-- product category -->
    <div class="form-group">
      <label for="cgry-select" class="col-sm-2 control-label">选择分类</label>
      <div class="col-sm-10">
        <%= f.select(:category_id, options_for_select(Category.all.collect { |m| [ m.name, m.id ] }), {}, class: "form-control", id: "cgry-select", style: "width:20%", multiple: true) %>
      </div>
    </div>

    <!-- product name -->
    <div class="form-group">
      <label for="pro-name" class="col-sm-2 control-label">商品标题</label>
      <div class="col-sm-10">
        <%= f.text_field :name, class: "form-control", id: "pro-name", placeholder: "请输入商品标题" %>
      </div>
    </div>

    <!-- product type -->
    <div class="form-group">
      <label for="pro-type" class="col-sm-2 control-label">商品型号</label>
      <div class="col-sm-10" id="insert-pro-sku">
        <div>
          <span><%= link_to_add_fields "添加型号", f, :stock_keeping_units %></span>
        </div>

        <%= f.fields_for :stock_keeping_units do |sku| %>
          <%= render 'products/stock_keeping_unit_fields', f: sku %>
        <% end %>

      </div>
    </div>

    <!-- product price -->
    <div class="form-group">
      <label for="pro-price" class="col-sm-2 control-label">商品价格</label>
      <div class="col-sm-10">
        <div class="input-group">
          <%= f.text_field :price, type: "text", class: "form-control", placeholder: "请输入商品价格", id: "pro-price" %>
          <span class="input-group-addon">元</span>
        </div>
      </div>
    </div>
    
    <!-- product thumb -->
    <div class="form-group">
      <label for="pro-thumb" class="col-sm-2 control-label">商品缩略图</label>
      <div class="col-sm-10">
        <div class="well">
          <%= image_tag "def_product.png", id: "img-preview-a", class: "img-rounded" %>
          <%= image_tag "def_product.png", id: "img-preview-b", class: "img-rounded" %>
          <%= image_tag "def_product.png", id: "img-preview-c", class: "img-rounded" %>
          <br />
          <span class="btn btn-info">
            <%= f.file_field :thumb, onchange: "tmbReadURL(this)", multiple: true, class: "file_input" %>
          </span>
        </div>
      </div>
    </div>

    <!-- product description -->
    <div class="form-group">
      <label for="pro-description" class="col-sm-2 control-label">商品描述</label>
      <div class="col-sm-10">
        <%= f.text_area :description, class: "form-control", id: "detail-editor", placeholder: "" %>
      </div>
    </div>

    <!-- product dimensions -->
    <div class="form-group">
      <label for="pro-description" class="col-sm-2 control-label">商品规格</label>
      <div class="col-sm-10">
        <div>
          <span><%= link_to_add_fields "添加规格", f, :dimensions %></span>
        </div>
        <%= f.fields_for :dimensions do |disn| %>
          <%= render 'products/dimension_fields', f: disn %>
        <% end %>
      </div>
    </div>

    <!-- product name -->
    <div class="form-group">
      <label for="pro-name" class="col-sm-2 control-label">上架/下架</label>
      <div class="col-sm-10">
        <!-- product others -->
        <span class="label label-danger">上架:</span> <%= f.check_box :active %>
      </div>
    </div>

    <!-- product pictures -->
    <div class="form-group">
      <label for="pro-pics" class="col-sm-2 control-label">商品图片</label>
      <div class="col-sm-10">
        <div class="well">
          <%= image_tag "def_product.png", id: "img-preview-e", class: "img-rounded" %>
          <%= image_tag "def_product.png", id: "img-preview-d", class: "img-rounded" %>
          <%= image_tag "def_product.png", id: "img-preview-f", class: "img-rounded" %>
          <br />
          <span class="btn btn-info">
            <%= f.file_field :pictures, onchange: "picReadURL(this)", multiple: true, class: "file_input" %>
          </span>
        </div>
      </div>
    </div>

    <div style="padding-bottom:100px; padding-top:80px;">
      <%= f.submit "保存", class:"btn btn-info btn-sm", style: "float:right;" %>
    </div>

<% end %>
</div>
<div class="col-md-1"></div>

<script>
editor = new Simditor({
  textarea: $('#detail-editor'),
  toolbar: [
      'title','bold','italic','underline','strikethrough','color','|',
      'ol','ul','blockquote','code','table','link','image','hr','|',
      'indent','outdent'
    ],
  pasteImage: true,
  defaultImage: '<%= image_path "upload-loading.png" %>'
});

</script>
